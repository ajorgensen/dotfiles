alias r="bundle exec rails"
alias rs="bundle exec rails server"
alias rc="bundle exec rails console"
alias t="script/test $*"
alias f="script/features $*"
alias rbgrep="grep --include='*.rb' $*"
alias r=rails
alias ss="spin serve"
alias be="bundle exec"
alias amend="git commit --amend"
alias gcm="git commit -v"
alias gs="git status"
alias gaa="git add --all"
alias gap="git add --patch"
alias gp="git put"
alias glog="git log --color"
alias gpull="git pull"
alias gco="git checkout"
alias get="sudo apt-get install"
alias ls="ls -lrthG"
alias shnow="sudo shutdown -h now"
alias gdiff="git diff --color"
alias pag="ps aux | grep"
alias j="jump"
alias m="mark"
alias um="unmark"
alias clean-merged="git checkout master; git branch --merged | grep -v '\*' | xargs -n 1 git branch -d"
alias tmux="TERM=xterm-256color tmux -2"
alias retag='ctags -R --exclude=.svn --exclude=.git --exclude=log --exclude=tmp *'
alias grim='git rebase -i origin/master'
alias g='git'
alias gpop='git stash pop'
alias gstash='git stash'
alias sz='source ~/.zshrc'
alias ez='vi ~/.zshrc'
alias eza='vim ~/.zsh/aliases'
alias gcob='git co -b'
alias dbreset="bundle exec rake db:drop db:create db:migrate db:seed db:test:prepare"
alias rubypad="vim ~/Documents/rubypad.rb"
alias notepad="vim ~/Documents/notepad.md"
alias v="vim"
alias c="cd"
alias vi="vim"
alias fixup="gaa; gc f; grim"

findandcd() {
  cd $(find . -type d -name $1 | head -n 1)
}
alias cdf=findandcd

# Grep processes and show headers.
function psgrep(){ ps -ef | sed -e '1p' -e "/$1/!d" }

# See what is listening on a given port: `whoport 80`
function whoport(){ lsof -i :$1 } # may need sudo

for bname in 'rspec' 'rails'
do
  eval "be${bname}() { bundle exec ${bname} }"
done

function abs_path {
  (cd "$(dirname '$1')" &>/dev/null && printf "%s/%s" "$(pwd)" "${1##*/}")
}

open_in_intellij() {
  /Applications/IntelliJ\ IDEA\ 14\ CE.app/Contents/MacOS/idea $(abs_path $1) > /dev/null 2>&1 & > /dev/null 2>&1
}
alias iopen=open_in_intellij
